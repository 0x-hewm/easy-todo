# Easy Todo Chrome 扩展开发指南

## 开发环境设置

1. 安装依赖：
```bash
npm install
```

2. 启动开发服务：
```bash
npm run dev
```

3. 在 Chrome 中加载扩展：
   - 打开 Chrome 浏览器
   - 访问 `chrome://extensions/`
   - 开启"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择项目的 `dist` 目录

## 项目结构

```
easy-todo/
├── src/                      # 源代码目录
│   ├── assets/              # 静态资源
│   │   ├── i18n/           # 国际化文件
│   │   └── icons/          # 图标文件
│   ├── components/         # Web Components
│   │   ├── TaskForm.ts
│   │   ├── TaskItem.ts
│   │   ├── TaskList.ts
│   │   └── TaskStats.ts
│   ├── services/          # 服务层
│   │   ├── StorageService.ts
│   │   ├── NotificationService.ts
│   │   └── TodoService.ts
│   ├── utils/            # 工具类
│   │   ├── date.ts
│   │   ├── i18n.ts
│   │   └── theme.ts
│   ├── types/           # 类型定义
│   │   └── index.ts
│   ├── popup.html      # 弹出页面
│   ├── popup.ts        # 弹出页面逻辑
│   ├── background.ts   # 后台脚本
│   ├── manifest.json   # 扩展配置
│   └── styles.css      # 全局样式
└── dist/               # 构建输出目录

## 开发指南

### 添加新功能

1. 定义类型：
   - 在 `src/types/index.ts` 中添加新的类型定义

2. 添加服务：
   - 在 `src/services` 目录下创建新的服务类
   - 在现有服务中添加新的方法

3. 创建组件：
   - 在 `src/components` 目录下创建新的 Web Component
   - 使用 Shadow DOM 确保样式隔离
   - 实现必要的生命周期方法

4. 更新国际化：
   - 在 `src/assets/i18n` 目录下的语言文件中添加新的翻译

### 构建与发布

1. 开发构建：
```bash
npm run dev
```

2. 生产构建：
```bash
npm run build
```

3. 打包发布：
```bash
npm run package
```

### 调试技巧

1. 后台脚本调试：
   - 在扩展管理页面点击"背景页"链接
   - 使用 Chrome DevTools 调试

2. 弹出页面调试：
   - 右键点击扩展图标，选择"审查弹出内容"
   - 使用 Chrome DevTools 调试

3. 存储调试：
   - 在 Chrome DevTools 的 Application 标签页查看存储内容

## 最佳实践

1. 代码规范：
   - 使用 TypeScript 类型系统
   - 保持组件的单一职责
   - 使用适当的注释

2. 性能优化：
   - 减少存储操作频率
   - 使用防抖处理频繁事件
   - 优化 DOM 操作

3. 用户体验：
   - 添加适当的加载状态
   - 提供清晰的错误提示
   - 保持界面响应及时

## 常见问题

1. 构建失败：
   - 检查依赖是否正确安装
   - 确认 TypeScript 配置是否正确
   - 查看构建日志寻找错误信息

2. 扩展未更新：
   - 在扩展管理页面重新加载扩展
   - 清除浏览器缓存
   - 检查构建输出目录

3. 存储问题：
   - 检查存储配额
   - 验证数据格式
   - 使用 Chrome DevTools 检查存储内容